import{u as g,c as h,b as $e,a as Y,B as Z}from"./Form-C0Oqpjwu.js";import{r as l,j as t,m as ke,t as Ae}from"./index-Br3pUsPM.js";import{h as P,A as Fe,d as be,i as Oe,u as q,r as z,M as Ie,B as Ue,F as Q,e as He,j as Le,o as Ge,k as Ve,f as D}from"./cn-BxRhNejh.js";const C=e=>l.useMemo(()=>{if(!(e instanceof Date))return{date:"",time:""};const a=e.getDate().toString().padStart(2,"0"),o=e.toLocaleString("en-US",{month:"short"}).toUpperCase(),r=e.getFullYear(),n=`${a} ${o}, ${r}`,d=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return{date:n,time:d}},[e]);function We(e){const a=l.useRef(e);return a.current=e,a}function Ze(e){const a=We(e);l.useEffect(()=>()=>a.current(),[])}var M;function K(e){if((!M&&M!==0||e)&&P){var a=document.createElement("div");a.style.position="absolute",a.style.top="-9999px",a.style.width="50px",a.style.height="50px",a.style.overflow="scroll",document.body.appendChild(a),M=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return M}function qe(){return l.useState(null)}const J=l.forwardRef(({className:e,bsPrefix:a,as:o="div",...r},n)=>(a=g(a,"modal-body"),t.jsx(o,{ref:n,className:h(e,a),...r})));J.displayName="ModalBody";const E=l.forwardRef(({bsPrefix:e,className:a,contentClassName:o,centered:r,size:n,fullscreen:d,children:i,scrollable:u,...c},j)=>{e=g(e,"modal");const m=`${e}-dialog`,p=typeof d=="string"?`${e}-fullscreen-${d}`:`${e}-fullscreen`;return t.jsx("div",{...c,ref:j,className:h(m,a,n&&`${e}-${n}`,r&&`${m}-centered`,u&&`${m}-scrollable`,d&&p),children:t.jsx("div",{className:h(`${e}-content`,o),children:i})})});E.displayName="ModalDialog";const X=l.forwardRef(({className:e,bsPrefix:a,as:o="div",...r},n)=>(a=g(a,"modal-footer"),t.jsx(o,{ref:n,className:h(e,a),...r})));X.displayName="ModalFooter";const ee=l.forwardRef(({bsPrefix:e,className:a,closeLabel:o="Close",closeButton:r=!1,...n},d)=>(e=g(e,"modal-header"),t.jsx(Fe,{ref:d,...n,className:h(a,e),closeLabel:o,closeButton:r})));ee.displayName="ModalHeader";const ze=be("h4"),te=l.forwardRef(({className:e,bsPrefix:a,as:o=ze,...r},n)=>(a=g(a,"modal-title"),t.jsx(o,{ref:n,className:h(e,a),...r})));te.displayName="ModalTitle";function Ke(e){return t.jsx(Q,{...e,timeout:null})}function Ye(e){return t.jsx(Q,{...e,timeout:null})}const ae=l.forwardRef(({bsPrefix:e,className:a,style:o,dialogClassName:r,contentClassName:n,children:d,dialogAs:i=E,"data-bs-theme":u,"aria-labelledby":c,"aria-describedby":j,"aria-label":m,show:p=!1,animation:f=!0,backdrop:w=!0,keyboard:se=!0,onEscapeKeyDown:B,onShow:oe,onHide:y,container:ne,autoFocus:re=!0,enforceFocus:le=!0,restoreFocus:de=!0,restoreFocusOptions:ce,onEntered:ie,onExit:$,onExiting:ue,onEnter:k,onEntering:A,onExited:F,backdropClassName:b,manager:O,...me},he)=>{const[pe,fe]=l.useState({}),[ge,I]=l.useState(!1),S=l.useRef(!1),R=l.useRef(!1),N=l.useRef(null),[v,_e]=qe(),je=Oe(he,_e),U=q(y),Ne=$e();e=g(e,"modal");const ve=l.useMemo(()=>({onHide:U}),[U]);function H(){return O||He({isRTL:Ne})}function L(s){if(!P)return;const _=H().getScrollbarWidth()>0,W=s.scrollHeight>Ge(s).documentElement.clientHeight;fe({paddingRight:_&&!W?K():void 0,paddingLeft:!_&&W?K():void 0})}const T=q(()=>{v&&L(v.dialog)});Ze(()=>{z(window,"resize",T),N.current==null||N.current()});const xe=()=>{S.current=!0},we=s=>{S.current&&v&&s.target===v.dialog&&(R.current=!0),S.current=!1},G=()=>{I(!0),N.current=Ve(v.dialog,()=>{I(!1)})},ye=s=>{s.target===s.currentTarget&&G()},Me=s=>{if(w==="static"){ye(s);return}if(R.current||s.target!==s.currentTarget){R.current=!1;return}y?.()},Se=s=>{se?B?.(s):(s.preventDefault(),w==="static"&&G())},Re=(s,_)=>{s&&L(s),k?.(s,_)},Te=s=>{N.current==null||N.current(),$?.(s)},Ce=(s,_)=>{A?.(s,_),Le(window,"resize",T)},De=s=>{s&&(s.style.display=""),F?.(s),z(window,"resize",T)},Ee=l.useCallback(s=>t.jsx("div",{...s,className:h(`${e}-backdrop`,b,!f&&"show")}),[f,b,e]),V={...o,...pe};V.display="block";const Be=s=>t.jsx("div",{role:"dialog",...s,style:V,className:h(a,e,ge&&`${e}-static`,!f&&"show"),onClick:w?Me:void 0,onMouseUp:we,"data-bs-theme":u,"aria-label":m,"aria-labelledby":c,"aria-describedby":j,children:t.jsx(i,{...me,onMouseDown:xe,className:r,contentClassName:n,children:d})});return t.jsx(Ie.Provider,{value:ve,children:t.jsx(Ue,{show:p,ref:je,backdrop:w,container:ne,keyboard:!0,autoFocus:re,enforceFocus:le,restoreFocus:de,restoreFocusOptions:ce,onEscapeKeyDown:Se,onShow:oe,onHide:y,onEnter:Re,onEntering:Ce,onEntered:ie,onExit:Te,onExiting:ue,onExited:De,manager:H(),transition:f?Ke:void 0,backdropTransition:f?Ye:void 0,renderBackdrop:Ee,renderDialog:Be})})});ae.displayName="Modal";const x=Object.assign(ae,{Body:J,Header:ee,Title:te,Footer:X,Dialog:E,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Pe=l.forwardRef(({bsPrefix:e,variant:a,animation:o="border",size:r,as:n="div",className:d,...i},u)=>{e=g(e,"spinner");const c=`${e}-${o}`;return t.jsx(n,{ref:u,...i,className:h(d,c,r&&`${c}-${r}`,a&&`text-${a}`)})});Pe.displayName="Spinner";const Qe=({heading:e,children:a,show:o,handleClose:r,closeButton:n,saveButton:d})=>t.jsxs(x,{show:o,onHide:r,children:[t.jsx(x.Header,{closeButton:!0,children:t.jsx(x.Title,{children:e})}),t.jsx(x.Body,{children:a}),n&&d&&t.jsxs(x.Footer,{children:[n,d]})]}),Je="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='64px'%20height='64px'%20viewBox='-2.94%200%2031.716%2031.716'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%20transform='translate(-355.957%20-579)'%3e%3cpath%20d='M376.515,610.716H361.231a2.361,2.361,0,0,1-2.358-2.359V584.1a1,1,0,0,1,2,0v24.255a.36.36,0,0,0,.358.359h15.284a.36.36,0,0,0,.358-.359V584.1a1,1,0,0,1,2,0v24.255A2.361,2.361,0,0,1,376.515,610.716Z'/%3e%3cpath%20d='M365.457,604.917a1,1,0,0,1-1-1v-14a1,1,0,0,1,2,0v14A1,1,0,0,1,365.457,604.917Z'/%3e%3cpath%20d='M372.29,604.917a1,1,0,0,1-1-1v-14a1,1,0,0,1,2,0v14A1,1,0,0,1,372.29,604.917Z'/%3e%3cpath%20d='M380.79,585.1H356.957a1,1,0,0,1,0-2H380.79a1,1,0,0,1,0,2Z'/%3e%3cpath%20d='M372.79,581h-7.917a1,1,0,1,1,0-2h7.917a1,1,0,0,1,0,2Z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Xe=ke.injectEndpoints({endpoints:e=>({getAllProducts:e.query({query:()=>"/products",providesTags:["Products"]}),removeProduct:e.mutation({query:a=>({url:`/products/${a}`,method:"DELETE"}),invalidatesTags:["Products","Orders"]}),createProduct:e.mutation({query:a=>({url:"/products",method:"POST",body:a}),invalidatesTags:["Products","Orders"]})})}),{useGetAllProductsQuery:rt,useRemoveProductMutation:et,useCreateProductMutation:lt}=Xe,tt=e=>{const[a,o]=l.useState(!1),[r]=et(),n=()=>o(!1),d=()=>o(!0),{t:i}=Y();return{show:a,handleClose:n,handleShow:d,handleRemove:async()=>{try{await r(+e.id).unwrap(),n(),Ae.success(i("Product deleted"))}catch(c){console.error("Failed to delete product",c)}}}},dt=({product:e,inOrder:a})=>{const{date:o,time:r}=C(new Date(e.date)),{date:n}=C(new Date(e.guarantee.start)),{date:d}=C(new Date(e.guarantee.end)),{show:i,handleClose:u,handleRemove:c,handleShow:j}=tt(e),{t:m}=Y();return t.jsxs("li",{className:D("products__list-item",{"in-order":a}),children:[t.jsxs("div",{className:"products__item-info",children:[t.jsx("img",{src:e.photo,alt:e.title,className:"products__info-img"}),t.jsxs("div",{className:"products__info-content",children:[t.jsx("span",{className:"products__content-title",children:e.title}),t.jsx("span",{className:"products__content-serial",children:e.serialNumber})]})]}),t.jsxs("div",{className:"products__item-guarantee",children:[t.jsxs("span",{className:"products__guarantee-from",children:["from: ",n]}),t.jsxs("span",{className:"products__guarantee-to",children:["to: ",d]})]}),t.jsx("span",{className:"products__item-status",children:e.isNew?"new":"used"}),t.jsxs("div",{className:"products__item-order",children:[t.jsx("span",{className:"products__order-id",children:e.order}),t.jsx("span",{className:"products__order-title",children:"Order ID"})]}),t.jsx("div",{className:"products__item-price",children:e.price.map((p,f)=>t.jsxs("span",{className:D("product__price",{default:!!p.isDefault}),children:[t.jsx("span",{className:"products__price-value",children:p.value.toFixed(2)}),t.jsx("span",{className:"products__price-currency",children:p.symbol})]},f))}),t.jsxs("div",{className:"products__item-date",children:[t.jsx("span",{className:"products__date-time",children:r}),t.jsx("span",{className:"products__date-day",children:o})]}),t.jsx("img",{src:Je,alt:"remove icon",className:"products__remove-icon",onClick:j}),t.jsx(Qe,{heading:m("Are you sure you want to delete this product?"),show:i,handleClose:u,closeButton:t.jsx(Z,{variant:"secondary",onClick:u,children:m("Close")}),saveButton:t.jsx(Z,{variant:"danger",onClick:c,children:m("Delete")}),children:t.jsx(at,{product:e})})]})},at=({product:e})=>t.jsxs("div",{className:"modal__product",children:[t.jsxs("div",{className:"modal__product-info",children:[t.jsx("img",{src:e.photo,alt:e.title,className:"modal__info-img"}),t.jsxs("div",{className:"modal__info-content",children:[t.jsx("span",{className:"modal__info-title",children:e.title}),t.jsx("span",{className:"modal__info-description",children:e.serialNumber})]})]}),t.jsx("div",{className:"modal__product-price",children:e.price.map((a,o)=>t.jsxs("span",{className:D("modal__price",{default:!!a.isDefault}),children:[t.jsx("span",{className:"modal__price-value",children:a.value.toFixed(2)}),t.jsx("span",{className:"modal__price-currency",children:a.symbol})]},o))})]});export{Qe as M,dt as P,Pe as S,rt as a,Xe as p,Je as r,C as u};
